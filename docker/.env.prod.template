# =============================================================================
# Production Environment Variables Template
# =============================================================================
# Copy this file to .env.prod and customize the values for your production environment
# Usage: docker compose -f docker/docker-compose.prod.yml --env-file docker/.env.prod up

# =============================================================================
# Database Configuration
# =============================================================================
POSTGRES_USER=tasker
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_PORT=5432

# =============================================================================
# RabbitMQ Configuration (TAS-133d - optional messaging backend)
# =============================================================================
# Only needed if using backend = "rabbitmq" in config/tasker/*.toml
# RABBITMQ_URL=amqp://tasker:your_rabbitmq_password@rabbitmq:5672/%2F

# =============================================================================
# Application Configuration
# =============================================================================
TASKER_ENV=production
RUST_LOG=info,tasker_orchestration=info,tasker_shared=info,pgmq_notify=info

# =============================================================================
# Service Ports
# =============================================================================
ORCHESTRATION_PORT=8080
WORKER_PORT=8081

# =============================================================================
# Worker Configuration
# =============================================================================
WORKER_ID=prod-worker-001
WORKER_POOL_SIZE=8
WORKER_REPLICAS=2
ORCHESTRATION_WORKERS=4

# =============================================================================
# Database Migration Settings
# =============================================================================
# Whether to run migrations on orchestration startup
RUN_MIGRATIONS=true

# Migration deployment mode: standard, safe, emergency
# - standard: Run migrations normally with safety checks
# - safe: Extra validation and slower rollout
# - emergency: Skip some safety checks for urgent deployments
DEPLOYMENT_MODE=standard

# Migration retry configuration
DB_MIGRATION_RETRIES=3
DB_MIGRATION_RETRY_DELAY=10
DB_MIGRATION_TIMEOUT=300

# =============================================================================
# Monitoring (Optional - requires --profile monitoring)
# =============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# =============================================================================
# Security Notes
# =============================================================================
# - Keep this file secure and never commit it to version control
# - Use strong passwords for POSTGRES_PASSWORD
# - Consider using Docker secrets for sensitive values in production
# - Review and adjust resource limits in docker-compose.prod.yml based on your infrastructure
