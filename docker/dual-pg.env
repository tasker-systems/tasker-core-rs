# TAS-78: Dual Database Test Environment
#
# Source this file to configure your shell for split-database testing:
#   source docker/dual-pg.env
#
# Then run migrations:
#   cargo make db-migrate-split
#
# Or run the full setup:
#   cargo make db-setup-split

# Tasker database (NO pgmq extension)
export DATABASE_URL="postgresql://tasker:tasker@localhost:5433/tasker_split_test"

# PGMQ database (has pgmq + pg_uuidv7 extensions)
export PGMQ_DATABASE_URL="postgresql://tasker:tasker@localhost:5433/pgmq_split_test"

# Tasker environment
export TASKER_ENV=test
export TASKER_CONFIG_PATH="${TASKER_CONFIG_PATH:-$(pwd)/config/tasker}"

# Telemetry (optional - use if observability stack is running)
# export OTEL_EXPORTER_OTLP_ENDPOINT="http://localhost:4319"
# export TELEMETRY_ENABLED=true

echo "TAS-78: Split database environment configured"
echo "  DATABASE_URL:      $DATABASE_URL"
echo "  PGMQ_DATABASE_URL: $PGMQ_DATABASE_URL"
