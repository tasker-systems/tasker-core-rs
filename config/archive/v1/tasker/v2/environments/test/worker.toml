# Override environment for test
environment = "test"

[worker]
worker_id = "test-worker-001"

[worker.step_processing]
max_concurrent_steps = 10

[worker.event_systems.worker.metadata.resource_limits]
max_memory_mb = 512
max_database_connections = 10

[worker.web]
enabled = true
bind_address = "${TASKER_WEB_BIND_ADDRESS:-0.0.0.0:8081}"  # Worker binds to 8081 internally (Docker maps external ports)
request_timeout_ms = 5000

# Smaller MPSC channel buffers for tests (TAS-51)

[worker.mpsc_channels.command_processor]
command_buffer_size = 100

[worker.mpsc_channels.event_systems]
event_channel_buffer_size = 100

[worker.mpsc_channels.event_subscribers]
completion_buffer_size = 100
result_buffer_size = 100

[worker.mpsc_channels.in_process_events]

[worker.mpsc_channels.event_listeners]
pgmq_event_buffer_size = 100
