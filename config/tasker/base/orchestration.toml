# Tasker V2 Orchestration Configuration (Base)
# Orchestration-specific settings

[orchestration]
mode = "standalone"
enable_performance_logging = true

[orchestration.event_systems.orchestration]
system_id = "orchestration-event-system"
deployment_mode = "Hybrid"

[orchestration.event_systems.orchestration.timing]
health_check_interval_seconds = 30
fallback_polling_interval_seconds = 5
visibility_timeout_seconds = 30
processing_timeout_seconds = 60
claim_timeout_seconds = 300

[orchestration.event_systems.orchestration.processing]
max_concurrent_operations = 50
batch_size = 20
max_retries = 3

[orchestration.event_systems.orchestration.processing.backoff]
initial_delay_ms = 100
max_delay_ms = 10000
multiplier = 2.0
jitter_percent = 0.1

[orchestration.event_systems.orchestration.health]
enabled = true
performance_monitoring_enabled = true
max_consecutive_errors = 10
error_rate_threshold_per_minute = 20

[orchestration.event_systems.task_readiness]
system_id = "task-readiness-event-system"
deployment_mode = "Hybrid"

[orchestration.event_systems.task_readiness.timing]
health_check_interval_seconds = 30
fallback_polling_interval_seconds = 5
visibility_timeout_seconds = 30
processing_timeout_seconds = 60
claim_timeout_seconds = 300

[orchestration.event_systems.task_readiness.processing]
max_concurrent_operations = 100
batch_size = 50
max_retries = 3

[orchestration.event_systems.task_readiness.processing.backoff]
initial_delay_ms = 100
max_delay_ms = 10000
multiplier = 2.0
jitter_percent = 0.1

[orchestration.event_systems.task_readiness.health]
enabled = true
performance_monitoring_enabled = true
max_consecutive_errors = 10
error_rate_threshold_per_minute = 20

[orchestration.decision_points]
enabled = true
max_steps_per_decision = 100
max_decision_depth = 20
warn_threshold_steps = 50
warn_threshold_depth = 10
enable_detailed_logging = false
enable_metrics = true

[orchestration.mpsc_channels.command_processor]
command_buffer_size = 5000

[orchestration.mpsc_channels.event_systems]
event_channel_buffer_size = 10000

[orchestration.mpsc_channels.event_listeners]
pgmq_event_buffer_size = 50000

[orchestration.web]
enabled = true
bind_address = "0.0.0.0:8080"
request_timeout_ms = 30000

[orchestration.web.database_pools]
web_api_pool_size = 20
web_api_max_connections = 30
web_api_connection_timeout_seconds = 30
web_api_idle_timeout_seconds = 600
max_total_connections_hint = 50

[orchestration.web.cors]
enabled = true
allowed_origins = ["*"]
allowed_methods = ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
allowed_headers = ["*"]
max_age_seconds = 86400

[orchestration.web.auth]
enabled = false
jwt_issuer = "tasker-core"
jwt_audience = "tasker-api"
jwt_token_expiry_hours = 24
jwt_private_key = ""
jwt_public_key = ""
api_key = ""
api_key_header = "X-API-Key"

[[orchestration.web.auth.protected_routes]]
method = "POST"
path = "/v1/tasks"
auth_type = "bearer"
required = false

[[orchestration.web.auth.protected_routes]]
method = "DELETE"
path = "/v1/tasks/{task_uuid}"
auth_type = "bearer"
required = true

[[orchestration.web.auth.protected_routes]]
method = "PATCH"
path = "/v1/tasks/{task_uuid}/workflow_steps/{step_uuid}"
auth_type = "bearer"
required = true

[[orchestration.web.auth.protected_routes]]
method = "GET"
path = "/v1/analytics/performance"
auth_type = "bearer"
required = false

[[orchestration.web.auth.protected_routes]]
method = "GET"
path = "/v1/analytics/bottlenecks"
auth_type = "bearer"
required = false

[orchestration.web.rate_limiting]
enabled = false
requests_per_minute = 1000
burst_size = 100
per_client_limit = true

[orchestration.web.resilience]
circuit_breaker_enabled = true
request_timeout_seconds = 30
max_concurrent_requests = 200
