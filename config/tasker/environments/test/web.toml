# Test Environment Web Configuration
# Overrides base web.toml for integration testing

[web]
enabled = true
bind_address = "127.0.0.1:8080" # Localhost-only for tests

[web.tls]
enabled = false
cert_path = "tests/web/certs/server.crt"
key_path = "tests/web/certs/server.key"

[web.cors]
enabled = true
allowed_origins = ["http://localhost:3000", "https://localhost:3000"]

[web.auth]
enabled = true
jwt_issuer = "tasker-core-test"
jwt_audience = "tasker-api-test"
jwt_token_expiry_hours = 1       # Short expiry for tests
# JWT keys loaded from environment variables during test setup
# JWT_PRIVATE_KEY and JWT_PUBLIC_KEY set by .env.web_test
# API_KEY set by .env.web_test

[web.rate_limiting]
enabled = false           # Disabled for testing
requests_per_minute = 100

[web.resilience]
circuit_breaker_enabled = true
request_timeout_seconds = 30
max_concurrent_requests = 50   # Lower for test environment

[web.resource_monitoring]
report_pool_usage_to_health_monitor = true
pool_usage_warning_threshold = 0.75
pool_usage_critical_threshold = 0.90

[web.database_pools]
# Smaller pools for test environment
web_api_pool_size = 5
web_api_max_connections = 8
web_api_connection_timeout_seconds = 10
web_api_idle_timeout_seconds = 300
max_total_connections_hint = 20         # Much smaller for tests
