# Test Environment Event Systems Configuration Overrides
#
# This file provides test-specific overrides for the unified event system configurations.
# It merges with the base configuration from config/tasker/base/event_systems.toml

# ============================================================================
# ORCHESTRATION EVENT SYSTEM - DEVELOPMENT OVERRIDES
# ============================================================================

[event_systems.orchestration]
system_id = "orchestration-event-system"
deployment_mode = "EventDrivenOnly"

# Faster timing for tests
[event_systems.orchestration.timing]
health_check_interval_seconds = 10
fallback_polling_interval_seconds = 1
visibility_timeout_seconds = 10
processing_timeout_seconds = 10
claim_timeout_seconds = 60

# Lower concurrency for test environments
[event_systems.orchestration.processing]
max_concurrent_operations = 5
batch_size = 5

# ============================================================================
# TASK READINESS EVENT SYSTEM - DEVELOPMENT OVERRIDES
# ============================================================================

[event_systems.task_readiness]
system_id = "task-readiness-event-system"
deployment_mode = "EventDrivenOnly"

# Faster timing for tests
[event_systems.task_readiness.timing]
health_check_interval_seconds = 10
fallback_polling_interval_seconds = 1
visibility_timeout_seconds = 10
processing_timeout_seconds = 10
claim_timeout_seconds = 60

# Lower concurrency for test environments
[event_systems.task_readiness.processing]
max_concurrent_operations = 20
batch_size = 10

# ============================================================================
# WORKER EVENT SYSTEM - DEVELOPMENT OVERRIDES
# ============================================================================

[event_systems.worker]
deployment_mode = "EventDrivenOnly"

# Faster timing for tests
[event_systems.worker.timing]
health_check_interval_seconds = 10
fallback_polling_interval_seconds = 1
visibility_timeout_seconds = 10
processing_timeout_seconds = 10
claim_timeout_seconds = 60

# Lower concurrency for test environments
[event_systems.worker.processing]
max_concurrent_operations = 5
batch_size = 5

# Development-specific worker metadata
[event_systems.worker.metadata.in_process_events]
# NOTE: broadcast_buffer_size MOVED to mpsc_channels.toml (TAS-51)
ffi_integration_enabled = true
deduplication_cache_size = 500

[event_systems.worker.metadata.listener]
retry_interval_seconds = 2
max_retry_attempts = 2

[event_systems.worker.metadata.fallback_poller]
enabled = true
polling_interval_ms = 500
batch_size = 5
age_threshold_seconds = 1
max_age_hours = 1
visibility_timeout_seconds = 10

[event_systems.worker.metadata.resource_limits]
max_memory_mb = 512
max_cpu_percent = 50.0
max_database_connections = 5
max_queue_connections = 3
