// TODO: Implement StepStateMachine for individual step state transitions