# TaskTemplate Configuration - TAS-64 Retry Mechanics E2E Testing
#
# Tests retry mechanics with configurable failure count
# Proves that retry actually re-executes handlers after transient failures
#
# Template: retry_mechanics_test:1.0.0
# Created: 2025-11-20 (TAS-64 Implementation)
#
# Test Pattern:
# fail_twice_then_succeed step fails first 2 attempts, succeeds on 3rd
# This validates: attempt counting, WaitingForRetry state, polling discovery
#
---
name: retry_mechanics_test
namespace_name: rust_e2e_retry
version: 1.0.0
description: "E2E test proving retry mechanics work through full orchestration loop"
metadata:
  author: TAS-64 Retry Mechanics Testing
  tags:
    - namespace:retry_testing
    - pattern:retry
    - type:e2e_test
    - implementation:rust
  documentation_url:
  created_at: "2025-11-20T00:00:00Z"
  updated_at: "2025-11-20T00:00:00Z"
  notes: "Uses FailNTimesHandler to inject controlled failures for retry validation"
task_handler:
  callable: tasker_worker_rust::step_handlers::RustStepHandler
  initialization:
    test_type: retry_mechanics
system_dependencies:
  primary: default
  secondary: []
domain_events: []
input_schema:
  type: object
  required: []
  properties:
    test_id:
      type: string
      description: "Optional test identifier for debugging"
steps:
  - name: fail_twice_then_succeed
    description: "Fails first 2 attempts, then succeeds on 3rd attempt"
    handler:
      callable: FailNTimesHandler
      initialization:
        fail_count: 2
    system_dependency:
    dependencies: []
    retry:
      retryable: true
      max_attempts: 5
      backoff: exponential
      backoff_base_ms: 50
      max_backoff_ms: 200
    timeout_seconds: 30
    publishes_events: []
environments:
  test:
    steps:
      - name: fail_twice_then_succeed
        timeout_seconds: 10
        retry:
          max_attempts: 5
          backoff_base_ms: 50
          max_backoff_ms: 200
