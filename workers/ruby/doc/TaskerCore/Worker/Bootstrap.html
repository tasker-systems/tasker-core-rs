<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: TaskerCore::Worker::Bootstrap
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "TaskerCore::Worker::Bootstrap";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Worker.html" title="TaskerCore::Worker (module)">Worker</a></span></span>
     &raquo; 
    <span class="title">Bootstrap</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: TaskerCore::Worker::Bootstrap
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">TaskerCore::Worker::Bootstrap</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd>Singleton</dd>
  </dl>
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/tasker_core/bootstrap.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Bootstrap orchestrator for Ruby worker</p>

<p>Manages the complete initialization and lifecycle of the Ruby worker system, coordinating both Rust foundation layer and Ruby business logic components. This is the primary entry point for starting a TaskerCore worker process.</p>

<p>The bootstrap process follows this sequence:</p>
<ol><li>
<p>**Initialize Ruby Components**: EventBridge, HandlerRegistry, Subscribers</p>
</li><li>
<p>**Bootstrap Rust Foundation**: Start Rust worker via FFI</p>
</li><li>
<p>**Start Event Processing**: Begin EventPoller for step execution</p>
</li><li>
<p>**Register Shutdown Handlers**: Setup graceful termination on signals</p>
</li></ol>

<p>The Bootstrap class is a singleton, ensuring only one worker instance runs per process. It handles the complex coordination between Ruby and Rust, managing lifecycle transitions and providing health monitoring.</p>

<p>Deployment Modes:</p>
<ul><li>
<p><strong>PollingOnly</strong>: Traditional polling-based coordination (highest latency, most reliable)</p>
</li><li>
<p><strong>EventDrivenOnly</strong>: Pure event-driven using PostgreSQL LISTEN/NOTIFY (lowest latency)</p>
</li><li>
<p><strong>Hybrid</strong>: Event-driven with polling fallback (recommended for production)</p>
</li></ul>

<p>Worker States:</p>
<ul><li>
<p><strong>:initialized</strong>: Created but not started</p>
</li><li>
<p><strong>:running</strong>: Fully operational and processing events</p>
</li><li>
<p><strong>:shutting_down</strong>: Graceful shutdown in progress</p>
</li><li>
<p><strong>:stopped</strong>: Completely shut down</p>
</li></ul>

<p>Signal Handling: The bootstrap automatically registers signal handlers for:</p>
<ul><li>
<p><strong>SIGINT</strong> (Ctrl+C): Graceful shutdown</p>
</li><li>
<p><strong>SIGTERM</strong>: Graceful shutdown</p>
</li><li>
<p><strong>at_exit</strong>: Cleanup on process exit</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Basic worker startup</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Start with default configuration
</span><span class='id identifier rubyid_bootstrap'>bootstrap</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Worker.html" title="TaskerCore::Worker (module)">Worker</a></span></span><span class='op'>::</span><span class='const'>Bootstrap</span><span class='period'>.</span><span class='id identifier rubyid_start!'><span class='object_link'><a href="#start!-class_method" title="TaskerCore::Worker::Bootstrap.start! (method)">start!</a></span></span>
<span class='comment'># =&gt; Returns bootstrap instance in :running status
</span>
<span class='comment'># Check if worker is running
</span><span class='id identifier rubyid_bootstrap'>bootstrap</span><span class='period'>.</span><span class='id identifier rubyid_running?'>running?</span>
<span class='comment'># =&gt; true</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Custom configuration</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_bootstrap'>bootstrap</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Worker.html" title="TaskerCore::Worker (module)">Worker</a></span></span><span class='op'>::</span><span class='const'>Bootstrap</span><span class='period'>.</span><span class='id identifier rubyid_start!'><span class='object_link'><a href="#start!-class_method" title="TaskerCore::Worker::Bootstrap.start! (method)">start!</a></span></span><span class='lparen'>(</span>
  <span class='label'>worker_id:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>custom-worker-1</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='label'>enable_web_api:</span> <span class='kw'>false</span><span class='comma'>,</span>
  <span class='label'>event_driven_enabled:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>deployment_mode:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hybrid</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='comment'># PollingOnly, EventDrivenOnly, or Hybrid
</span>  <span class='label'>namespaces:</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>payments</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fulfillment</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>notifications</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='rparen'>)</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Health checking</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Worker.html" title="TaskerCore::Worker (module)">Worker</a></span></span><span class='op'>::</span><span class='const'>Bootstrap</span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_health_check'>health_check</span>
<span class='comment'># =&gt; {
</span><span class='comment'>#   healthy: true,
</span><span class='comment'>#   status: :running,
</span><span class='comment'>#   rust: { running: true, worker_core_status: &quot;processing&quot; },
</span><span class='comment'>#   ruby: {
</span><span class='comment'>#     status: :running,
</span><span class='comment'>#     event_bridge_active: true,
</span><span class='comment'>#     handlers_registered: 12,
</span><span class='comment'>#     subscriber_active: true,
</span><span class='comment'>#     event_poller_active: true
</span><span class='comment'>#   }
</span><span class='comment'># }</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Graceful shutdown</p>
</div></h5>
      
      <pre class="example code"><code><span class='comment'># Shutdown cleanly, completing in-flight work
</span><span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Worker.html" title="TaskerCore::Worker (module)">Worker</a></span></span><span class='op'>::</span><span class='const'>Bootstrap</span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_shutdown!'>shutdown!</span>
<span class='comment'># =&gt; Stops Rust worker, Ruby components, runs shutdown handlers</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Custom shutdown handlers</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_bootstrap'>bootstrap</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Worker.html" title="TaskerCore::Worker (module)">Worker</a></span></span><span class='op'>::</span><span class='const'>Bootstrap</span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span>
<span class='id identifier rubyid_bootstrap'>bootstrap</span><span class='period'>.</span><span class='id identifier rubyid_on_shutdown'>on_shutdown</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cleaning up resources...</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_cleanup_database_connections'>cleanup_database_connections</span>
  <span class='id identifier rubyid_flush_metrics'>flush_metrics</span>
<span class='kw'>end</span></code></pre>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Getting comprehensive status</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_status'>status</span> <span class='op'>=</span> <span class='id identifier rubyid_bootstrap'>bootstrap</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>
<span class='comment'># =&gt; {
</span><span class='comment'>#   rust: { running: true, ... },
</span><span class='comment'>#   ruby: {
</span><span class='comment'>#     status: :running,
</span><span class='comment'>#     handle_stored: true,
</span><span class='comment'>#     handle_id: &quot;550e8400-e29b-41d4-a716-446655440000&quot;,
</span><span class='comment'>#     worker_id: &quot;ruby-worker-123&quot;,
</span><span class='comment'>#     event_bridge_active: true,
</span><span class='comment'>#     handler_registry_size: 12,
</span><span class='comment'>#     subscriber_active: true,
</span><span class='comment'>#     event_poller_active: true
</span><span class='comment'>#   }
</span><span class='comment'># }</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="EventPoller.html" title="TaskerCore::Worker::EventPoller (class)">For event polling details</a></span></li>
    
      <li>For event coordination</li>
    
      <li><span class='object_link'><a href="../Registry/HandlerRegistry.html" title="TaskerCore::Registry::HandlerRegistry (class)">For handler management</a></span></li>
    
      <li>For Rust FFI operations</li>
    
  </ul>

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">#<strong>config</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute config.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#logger-instance_method" title="#logger (instance method)">#<strong>logger</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute logger.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#rust_handle-instance_method" title="#rust_handle (instance method)">#<strong>rust_handle</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute rust_handle.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start!-class_method" title="start! (class method)">.<strong>start!</strong>(config = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Start the worker system with optional configuration.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#health_check-instance_method" title="#health_check (instance method)">#<strong>health_check</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Perform health check on both Ruby and Rust components.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; Bootstrap </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Bootstrap.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_shutdown-instance_method" title="#on_shutdown (instance method)">#<strong>on_shutdown</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Register custom shutdown handler.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#running%3F-instance_method" title="#running? (instance method)">#<strong>running?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Check if worker is running.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rust_handle_running%3F-instance_method" title="#rust_handle_running? (instance method)">#<strong>rust_handle_running?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Check if Rust handle is valid and running.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown!-instance_method" title="#shutdown! (instance method)">#<strong>shutdown!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Graceful shutdown.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start!-instance_method" title="#start! (instance method)">#<strong>start!</strong>(config = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Main bootstrap method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Get comprehensive status.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_rust_handle-instance_method" title="#with_rust_handle (instance method)">#<strong>with_rust_handle</strong>(&amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Execute a block with the Rust handle, bootstrapping if necessary.</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="TaskerCore::Worker::Bootstrap (class)">Bootstrap</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Bootstrap.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111
112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 109</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='ivar'>@logger</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Logger.html" title="TaskerCore::Logger (class)">Logger</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:initialized</span>
  <span class='ivar'>@shutdown_handlers</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@rust_handle</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="config-instance_method">
  
    #<strong>config</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute config.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="logger-instance_method">
  
    #<strong>logger</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute logger.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_logger'>logger</span>
  <span class='ivar'>@logger</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="rust_handle-instance_method">
  
    #<strong>rust_handle</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute rust_handle.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rust_handle'>rust_handle</span>
  <span class='ivar'>@rust_handle</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="start!-class_method">
  
    .<strong>start!</strong>(config = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Start the worker system with optional configuration</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 117</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_start!'>start!</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_start!'>start!</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="health_check-instance_method">
  
    #<strong>health_check</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Perform health check on both Ruby and Rust components</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 240</span>

<span class='kw'>def</span> <span class='id identifier rubyid_health_check'>health_check</span>
  <span class='kw'>return</span> <span class='lbrace'>{</span> <span class='label'>healthy:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='ivar'>@status</span><span class='comma'>,</span> <span class='label'>error:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>not_running</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span> <span class='kw'>unless</span> <span class='id identifier rubyid_running?'>running?</span>

  <span class='kw'>begin</span>
    <span class='comment'># Get Rust worker status
</span>    <span class='id identifier rubyid_rust_status'>rust_status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'>FFI</span><span class='period'>.</span><span class='id identifier rubyid_worker_status'>worker_status</span>
    <span class='id identifier rubyid_rust_running'>rust_running</span> <span class='op'>=</span> <span class='id identifier rubyid_rust_status'>rust_status</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>running</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_rust_status'>rust_status</span><span class='lbracket'>[</span><span class='symbol'>:running</span><span class='rbracket'>]</span>

    <span class='comment'># Check Ruby components
</span>    <span class='id identifier rubyid_ruby_healthy'>ruby_healthy</span> <span class='op'>=</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='symbol'>:running</span> <span class='op'>&amp;&amp;</span>
                   <span class='const'><span class='object_link'><a href="EventBridge.html" title="TaskerCore::Worker::EventBridge (class)">EventBridge</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_active?'>active?</span> <span class='op'>&amp;&amp;</span>
                   <span class='const'><span class='object_link'><a href="EventPoller.html" title="TaskerCore::Worker::EventPoller (class)">EventPoller</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_active?'>active?</span> <span class='op'>&amp;&amp;</span>
                   <span class='const'><span class='object_link'><a href="../Registry.html" title="TaskerCore::Registry (module)">Registry</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Registry/HandlerRegistry.html" title="TaskerCore::Registry::HandlerRegistry (class)">HandlerRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_handlers'>handlers</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>

    <span class='id identifier rubyid_overall_healthy'>overall_healthy</span> <span class='op'>=</span> <span class='id identifier rubyid_rust_running'>rust_running</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_ruby_healthy'>ruby_healthy</span>

    <span class='lbrace'>{</span>
      <span class='label'>healthy:</span> <span class='id identifier rubyid_overall_healthy'>overall_healthy</span><span class='comma'>,</span>
      <span class='label'>status:</span> <span class='ivar'>@status</span><span class='comma'>,</span>
      <span class='label'>rust:</span> <span class='lbrace'>{</span>
        <span class='label'>running:</span> <span class='id identifier rubyid_rust_running'>rust_running</span><span class='comma'>,</span>
        <span class='label'>worker_core_status:</span> <span class='id identifier rubyid_rust_status'>rust_status</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>worker_core_status</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_rust_status'>rust_status</span><span class='lbracket'>[</span><span class='symbol'>:worker_core_status</span><span class='rbracket'>]</span>
      <span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='label'>ruby:</span> <span class='lbrace'>{</span>
        <span class='label'>status:</span> <span class='ivar'>@status</span><span class='comma'>,</span>
        <span class='label'>event_bridge_active:</span> <span class='const'><span class='object_link'><a href="EventBridge.html" title="TaskerCore::Worker::EventBridge (class)">EventBridge</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_active?'>active?</span><span class='comma'>,</span>
        <span class='label'>handlers_registered:</span> <span class='const'><span class='object_link'><a href="../Registry.html" title="TaskerCore::Registry (module)">Registry</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Registry/HandlerRegistry.html" title="TaskerCore::Registry::HandlerRegistry (class)">HandlerRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_handlers'>handlers</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span>
        <span class='label'>subscriber_active:</span> <span class='ivar'>@step_subscriber</span><span class='op'>&amp;.</span><span class='id identifier rubyid_active?'>active?</span> <span class='op'>||</span> <span class='kw'>false</span><span class='comma'>,</span>
        <span class='label'>event_poller_active:</span> <span class='const'><span class='object_link'><a href="EventPoller.html" title="TaskerCore::Worker::EventPoller (class)">EventPoller</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_active?'>active?</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Health check failed: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='lbrace'>{</span>
      <span class='label'>healthy:</span> <span class='kw'>false</span><span class='comma'>,</span>
      <span class='label'>status:</span> <span class='ivar'>@status</span><span class='comma'>,</span>
      <span class='label'>error:</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_shutdown-instance_method">
  
    #<strong>on_shutdown</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Register custom shutdown handler</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 235</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_shutdown'>on_shutdown</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@shutdown_handlers</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_block'>block</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="running?-instance_method">
  
    #<strong>running?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Check if worker is running</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 152</span>

<span class='kw'>def</span> <span class='id identifier rubyid_running?'>running?</span>
  <span class='ivar'>@status</span> <span class='op'>==</span> <span class='symbol'>:running</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_rust_worker_running?'>rust_worker_running?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rust_handle_running?-instance_method">
  
    #<strong>rust_handle_running?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Check if Rust handle is valid and running</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 157</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rust_handle_running?'>rust_handle_running?</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='ivar'>@rust_handle</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
                      <span class='lparen'>(</span><span class='ivar'>@rust_handle</span><span class='lbracket'>[</span><span class='symbol'>:handle_id</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='ivar'>@rust_handle</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>handle_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_rust_worker_running?'>rust_worker_running?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shutdown!-instance_method">
  
    #<strong>shutdown!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Graceful shutdown</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 192</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shutdown!'>shutdown!</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@status</span> <span class='op'>==</span> <span class='symbol'>:stopped</span>

  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Initiating graceful shutdown</span><span class='tstring_end'>&#39;</span></span>
  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:shutting_down</span>

  <span class='comment'># Transition Rust to graceful shutdown first
</span>  <span class='kw'>if</span> <span class='ivar'>@rust_handle</span>
    <span class='kw'>begin</span>
      <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'>FFI</span><span class='period'>.</span><span class='id identifier rubyid_transition_to_graceful_shutdown'>transition_to_graceful_shutdown</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed to transition to graceful shutdown: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Stop Ruby components
</span>  <span class='ivar'>@step_subscriber</span><span class='op'>&amp;.</span><span class='id identifier rubyid_stop!'>stop!</span>
  <span class='const'><span class='object_link'><a href="EventBridge.html" title="TaskerCore::Worker::EventBridge (class)">EventBridge</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_stop!'>stop!</span>
  <span class='const'><span class='object_link'><a href="EventPoller.html" title="TaskerCore::Worker::EventPoller (class)">EventPoller</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_stop!'>stop!</span>

  <span class='comment'># Stop Rust worker and clear handle
</span>  <span class='kw'>if</span> <span class='ivar'>@rust_handle</span>
    <span class='kw'>begin</span>
      <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'>FFI</span><span class='period'>.</span><span class='id identifier rubyid_stop_worker'>stop_worker</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed to stop Rust worker: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>ensure</span>
      <span class='ivar'>@rust_handle</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># Run custom shutdown handlers
</span>  <span class='ivar'>@shutdown_handlers</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_handler'>handler</span><span class='op'>|</span>
    <span class='id identifier rubyid_handler'>handler</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:stopped</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Worker shutdown complete</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start!-instance_method">
  
    #<strong>start!</strong>(config = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Main bootstrap method</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 122</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start!'>start!</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@config</span> <span class='op'>=</span> <span class='id identifier rubyid_default_config'>default_config</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_config'>config</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Starting Ruby worker bootstrap</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Configuration: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@config</span><span class='period'>.</span><span class='id identifier rubyid_inspect'>inspect</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># Initialize Ruby components first
</span>  <span class='id identifier rubyid_initialize_ruby_components!'>initialize_ruby_components!</span>

  <span class='comment'># Bootstrap Rust foundation via FFI
</span>  <span class='id identifier rubyid_bootstrap_rust_foundation!'>bootstrap_rust_foundation!</span>

  <span class='comment'># Start event processing
</span>  <span class='id identifier rubyid_start_event_processing!'>start_event_processing!</span>

  <span class='comment'># Register shutdown handlers
</span>  <span class='id identifier rubyid_register_shutdown_handlers!'>register_shutdown_handlers!</span>

  <span class='ivar'>@status</span> <span class='op'>=</span> <span class='symbol'>:running</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_info'>info</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Ruby worker system started successfully</span><span class='tstring_end'>&#39;</span></span>

  <span class='kw'>self</span>
<span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed to start worker: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_shutdown!'>shutdown!</span>
  <span class='id identifier rubyid_raise'>raise</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status-instance_method">
  
    #<strong>status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Get comprehensive status</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 165</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status'>status</span>
  <span class='id identifier rubyid_rust_status'>rust_status</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../TaskerCore.html" title="TaskerCore (module)">TaskerCore</a></span></span><span class='op'>::</span><span class='const'>FFI</span><span class='period'>.</span><span class='id identifier rubyid_worker_status'>worker_status</span>
  <span class='lbrace'>{</span>
    <span class='label'>rust:</span> <span class='id identifier rubyid_rust_status'>rust_status</span><span class='comma'>,</span>
    <span class='label'>ruby:</span> <span class='lbrace'>{</span>
      <span class='label'>status:</span> <span class='ivar'>@status</span><span class='comma'>,</span>
      <span class='label'>handle_stored:</span> <span class='op'>!</span><span class='ivar'>@rust_handle</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span><span class='comma'>,</span>
      <span class='label'>handle_id:</span> <span class='ivar'>@rust_handle</span><span class='op'>&amp;.</span><span class='id identifier rubyid_dig'>dig</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>handle_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='ivar'>@rust_handle</span><span class='op'>&amp;.</span><span class='id identifier rubyid_dig'>dig</span><span class='lparen'>(</span><span class='symbol'>:handle_id</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>worker_id:</span> <span class='ivar'>@rust_handle</span><span class='op'>&amp;.</span><span class='id identifier rubyid_dig'>dig</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>worker_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='ivar'>@rust_handle</span><span class='op'>&amp;.</span><span class='id identifier rubyid_dig'>dig</span><span class='lparen'>(</span><span class='symbol'>:worker_id</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>event_bridge_active:</span> <span class='const'><span class='object_link'><a href="EventBridge.html" title="TaskerCore::Worker::EventBridge (class)">EventBridge</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_active?'>active?</span><span class='comma'>,</span>
      <span class='label'>handler_registry_size:</span> <span class='const'><span class='object_link'><a href="../Registry.html" title="TaskerCore::Registry (module)">Registry</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Registry/HandlerRegistry.html" title="TaskerCore::Registry::HandlerRegistry (class)">HandlerRegistry</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_handlers'>handlers</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='comma'>,</span>
      <span class='label'>subscriber_active:</span> <span class='ivar'>@step_subscriber</span><span class='op'>&amp;.</span><span class='id identifier rubyid_active?'>active?</span> <span class='op'>||</span> <span class='kw'>false</span><span class='comma'>,</span>
      <span class='label'>event_poller_active:</span> <span class='const'><span class='object_link'><a href="EventPoller.html" title="TaskerCore::Worker::EventPoller (class)">EventPoller</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_active?'>active?</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
<span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
  <span class='id identifier rubyid_logger'>logger</span><span class='period'>.</span><span class='id identifier rubyid_error'>error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Failed to get status: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='lbrace'>{</span> <span class='label'>error:</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='ivar'>@status</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_rust_handle-instance_method">
  
    #<strong>with_rust_handle</strong>(&amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Execute a block with the Rust handle, bootstrapping if necessary</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tasker_core/bootstrap.rb', line 186</span>

<span class='kw'>def</span> <span class='id identifier rubyid_with_rust_handle'>with_rust_handle</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bootstrap_rust_foundation!'>bootstrap_rust_foundation!</span> <span class='kw'>unless</span> <span class='id identifier rubyid_rust_handle_running?'>rust_handle_running?</span>
  <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Oct  6 16:44:00 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.4.4).
</div>

    </div>
  </body>
</html>